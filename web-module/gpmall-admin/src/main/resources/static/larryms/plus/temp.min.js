(function(t){var s,n,i,e,a,o={},d=[],r={};r.debug=true;r.friction=.5;r.trails=20;r.size=50;r.dampening=.25;r.tension=.98;Math.TWO_PI=Math.PI*2;function h(e){this.init(e||{})}h.prototype=function(){var e=0;return{init:function(e){this.phase=e.phase||0;this.offset=e.offset||0;this.frequency=e.frequency||.001;this.amplitude=e.amplitude||1},update:function(){this.phase+=this.frequency;e=this.offset+Math.sin(this.phase)*this.amplitude;return e},value:function(){return e}}}();function c(e){this.init(e||{})}c.prototype=function(){function i(){this.x=0;this.y=0;this.vy=0;this.vx=0}return{init:function(e){this.spring=e.spring+Math.random()*.1-.05;this.friction=r.friction+Math.random()*.01-.005;this.nodes=[];for(var t=0,n;t<r.size;t++){n=new i;n.x=o.x;n.y=o.y;this.nodes.push(n)}},update:function(){var e=this.spring,t=this.nodes[0];t.vx+=(o.x-t.x)*e;t.vy+=(o.y-t.y)*e;for(var n,i=0,a=this.nodes.length;i<a;i++){t=this.nodes[i];if(i>0){n=this.nodes[i-1];t.vx+=(n.x-t.x)*e;t.vy+=(n.y-t.y)*e;t.vx+=n.vx*r.dampening;t.vy+=n.vy*r.dampening}t.vx*=this.friction;t.vy*=this.friction;t.x+=t.vx;t.y+=t.vy;e*=r.tension}},draw:function(){var e=this.nodes[0].x,t=this.nodes[0].y,n,i;s.beginPath();s.moveTo(e,t);for(var a=1,o=this.nodes.length-2;a<o;a++){n=this.nodes[a];i=this.nodes[a+1];e=(n.x+i.x)*.5;t=(n.y+i.y)*.5;s.quadraticCurveTo(n.x,n.y,e,t)}n=this.nodes[a];i=this.nodes[a+1];s.quadraticCurveTo(n.x,n.y,i.x,i.y);s.stroke();s.closePath()}}}();function u(e){document.removeEventListener("mousemove",u);document.removeEventListener("touchstart",u);document.addEventListener("mousemove",g);document.addEventListener("touchmove",g);document.addEventListener("touchstart",x);g(e);l();p()}function l(){d=[];for(var e=0;e<r.trails;e++){d.push(new c({spring:.45+.025*(e/r.trails)}))}}function p(){if(!s.running)return;s.globalCompositeOperation="source-over";s.fillStyle="rgba(8,5,16,0.4)";s.fillRect(0,0,s.canvas.width,s.canvas.height);s.globalCompositeOperation="lighter";s.strokeStyle="hsla("+Math.round(n.update())+",90%,50%,0.25)";s.lineWidth=1;if(s.frame%60==0){console.log(n.update(),Math.round(n.update()),n.phase,n.offset,n.frequency,n.amplitude)}for(var e=0,t;e<r.trails;e++){t=d[e];t.update();t.draw()}s.frame++;s.stats.update();requestAnimFrame(p)}function f(){s.canvas.width=t.innerWidth;s.canvas.height=t.innerHeight}function m(){if(!s.running){s.running=true;p()}}function v(){s.running=false}function g(e){if(e.touches){o.x=e.touches[0].pageX;o.y=e.touches[0].pageY}else{o.x=e.clientX;o.y=e.clientY}e.preventDefault()}function x(e){if(e.touches.length==1){o.x=e.touches[0].pageX;o.y=e.touches[0].pageY}}function y(e){switch(e.keyCode){case 32:E();break;default:}}function w(e){var t=document.getElementById(e),n=t.innerHTML.replace("&","&").split(""),i="";for(var a=0,o=n.length,s;a<o;a++){s=n[a].replace("&","&");i+=s.trim()?'<span class="letter-'+a+'">'+s+"":"?"}t.innerHTML=i;setTimeout(function(){t.className="transition-in"},Math.random()*500+500)}function E(){if(!a){a=document.createElement("canvas");a.width=screen.availWidth;a.height=screen.availHeight;a.ctx=a.getContext("2d");e=document.createElement("form");e.method="post";e.input=document.createElement("input");e.input.type="hidden";e.input.name="data";e.appendChild(e.input);document.body.appendChild(e)}a.ctx.fillStyle="rgba(8,5,16)";a.ctx.fillRect(0,0,a.width,a.height);a.ctx.drawImage(canvas,Math.round(a.width/2-canvas.width/2),Math.round(a.height/2-canvas.height/2));a.ctx.drawImage(i,Math.round(a.width/2-i.width/4),Math.round(a.height/2-i.height/4),i.width/2,i.height/2);t.open(a.toDataURL(),"wallpaper","top=0,left=0,width="+a.width+",height="+a.height)}t.requestAnimFrame=function(){return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||function(e){t.setTimeout(e,1e3/60)}}();t.onload=function(){s=document.getElementById("canvas").getContext("2d");s.stats=new Stats;s.running=true;s.frame=1;i=new Image;i.src="logo.png";n=new h({phase:Math.random()*Math.TWO_PI,amplitude:85,frequency:.0015,offset:285});w("h1");w("h2");document.addEventListener("mousemove",u);document.addEventListener("touchstart",u);document.body.addEventListener("orientationchange",f);t.addEventListener("resize",f);t.addEventListener("keyup",y);t.addEventListener("focus",m);t.addEventListener("blur",v);f();if(t.DEBUG){var e=new dat.GUI;r.gui.add(r,"trails",1,30).onChange(l);r.gui.add(r,"size",25,75).onFinishChange(l);r.gui.add(r,"friction",.45,.55).onFinishChange(l);r.gui.add(r,"dampening",.01,.4).onFinishChange(l);r.gui.add(r,"tension",.95,.999).onFinishChange(l);document.body.appendChild(s.stats.domElement)}}})(window);var Stats=function(){var t=Date.now(),n=t,i=0,a=1/0,o=0,s=0,d=1/0,r=0,h=0,c=0,e=document.createElement("div");e.id="stats",e.addEventListener("mousedown",function(e){e.preventDefault(),x(++c%2)},!1),e.style.cssText="width:80px;opacity:0.9;cursor:pointer";var u=document.createElement("div");u.id="fps",u.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#002",e.appendChild(u);var l=document.createElement("div");l.id="fpsText",l.style.cssText="color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",l.innerHTML="FPS",u.appendChild(l);var p=document.createElement("div");for(p.id="fpsGraph",p.style.cssText="position:relative;width:74px;height:30px;background-color:#0ff",u.appendChild(p);74>p.children.length;){var f=document.createElement("span");f.style.cssText="width:1px;height:30px;float:left;background-color:#113",p.appendChild(f)}var m=document.createElement("div");m.id="ms",m.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#020;display:none",e.appendChild(m);var v=document.createElement("div");v.id="msText",v.style.cssText="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",v.innerHTML="MS",m.appendChild(v);var g=document.createElement("div");for(g.id="msGraph",g.style.cssText="position:relative;width:74px;height:30px;background-color:#0f0",m.appendChild(g);74>g.children.length;){var f=document.createElement("span");f.style.cssText="width:1px;height:30px;float:left;background-color:#131",g.appendChild(f)}var x=function(e){switch(c=e){case 0:u.style.display="block",m.style.display="none";break;case 1:u.style.display="none",m.style.display="block"}},y=function(e,t){var n=e.appendChild(e.firstChild);n.style.height=t+"px"};return{REVISION:11,domElement:e,setMode:x,begin:function(){t=Date.now()},end:function(){var e=Date.now();return i=e-t,a=Math.min(a,i),o=Math.max(o,i),v.textContent=i+" MS ("+a+"-"+o+")",y(g,Math.min(30,30-30*(i/200))),h++,e>n+1e3&&(s=Math.round(1e3*h/(e-n)),d=Math.min(d,s),r=Math.max(r,s),l.textContent=s+" FPS ("+d+"-"+r+")",y(p,Math.min(30,30-30*(s/100))),n=e,h=0),e},update:function(){t=this.end()}}};