(function(g){var e=g.Chart,v=g.addEvent,i=g.removeEvent,w=g.createElement,u=g.discardElement,S=g.css,f=g.merge,k=g.each,E=g.extend,t=Math,C=t.max,h=document,a=window,n=g.isTouchDevice,r="M",s="L",F="div",l="hidden",G="none",x="highcharts-",M="absolute",D="px",d,o=g.Renderer.prototype.symbols,p=g.getOptions(),y;E(p.lang,{printChart:"Print chart",downloadPNG:"Download PNG image",downloadJPEG:"Download JPEG image",downloadPDF:"Download PDF document",downloadSVG:"Download SVG vector image",contextButtonTitle:"Chart context menu"});p.navigation={menuStyle:{border:"1px solid #A0A0A0",background:"#FFFFFF",padding:"5px 0"},menuItemStyle:{padding:"0 10px",background:G,color:"#303030",fontSize:n?"14px":"11px"},menuItemHoverStyle:{background:"#4572A5",color:"#FFFFFF"},buttonOptions:{symbolFill:"#E0E0E0",symbolSize:14,symbolStroke:"#666",symbolStrokeWidth:3,symbolX:12.5,symbolY:10.5,align:"right",buttonSpacing:3,height:22,theme:{fill:"white",stroke:"none"},verticalAlign:"top",width:24}};p.exporting={type:"image/png",url:"http://export.highcharts.com/",buttons:{contextButton:{menuClassName:x+"contextmenu",symbol:"menu",_titleKey:"contextButtonTitle",menuItems:[{textKey:"printChart",onclick:function(){this.print()}},{separator:true},{textKey:"downloadPNG",onclick:function(){this.exportChart()}},{textKey:"downloadJPEG",onclick:function(){this.exportChart({type:"image/jpeg"})}},{textKey:"downloadPDF",onclick:function(){this.exportChart({type:"application/pdf"})}},{textKey:"downloadSVG",onclick:function(){this.exportChart({type:"image/svg+xml"})}}]}}};g.post=function(e,t){var n,o;o=w("form",{method:"post",action:e,enctype:"multipart/form-data"},{display:G},h.body);for(n in t){w("input",{type:l,name:n,value:t[n]},null,o)}o.submit();u(o)};E(e.prototype,{getSVG:function(e){var t=this,s,n,o,i,r,a,l,p,c=f(t.options,e);if(!h.createElementNS){h.createElementNS=function(e,t){return h.createElement(t)}}n=w(F,null,{position:M,top:"-9999em",width:t.chartWidth+D,height:t.chartHeight+D},h.body);l=t.renderTo.style.width;p=t.renderTo.style.height;r=c.exporting.sourceWidth||c.chart.width||/px$/.test(l)&&parseInt(l,10)||600;a=c.exporting.sourceHeight||c.chart.height||/px$/.test(p)&&parseInt(p,10)||400;E(c.chart,{animation:false,renderTo:n,forExport:true,width:r,height:a});c.exporting.enabled=false;c.series=[];k(t.series,function(e){i=f(e.options,{animation:false,showCheckbox:false,visible:e.visible});if(!i.isInternal){c.series.push(i)}});s=new g.Chart(c,t.callback);k(["xAxis","yAxis"],function(a){k(t[a],function(e,t){var n=s[a][t],o=e.getExtremes(),i=o.userMin,r=o.userMax;if(n&&(i!==d||r!==d)){n.setExtremes(i,r,true,false)}})});o=s.container.innerHTML;c=null;s.destroy();u(n);o=o.replace(/zIndex="[^"]+"/g,"").replace(/isShadow="[^"]+"/g,"").replace(/symbolName="[^"]+"/g,"").replace(/jQuery[0-9]+="[^"]+"/g,"").replace(/url\([^#]+#/g,"url(#").replace(/<svg /,'<svg xmlns:xlink="http://www.w3.org/1999/xlink" ').replace(/ href=/g," xlink:href=").replace(/\n/," ").replace(/<\/svg>.*?$/,"</svg>").replace(/&nbsp;/g," ").replace(/&shy;/g,"­").replace(/<IMG /g,"<image ").replace(/height=([^" ]+)/g,'height="$1"').replace(/width=([^" ]+)/g,'width="$1"').replace(/hc-svg-href="([^"]+)">/g,'xlink:href="$1"/>').replace(/id=([^" >]+)/g,'id="$1"').replace(/class=([^" >]+)/g,'class="$1"').replace(/ transform /g," ").replace(/:(path|rect)/g,"$1").replace(/style="([^"]+)"/g,function(e){return e.toLowerCase()});o=o.replace(/(url\(#highcharts-[0-9]+)&quot;/g,"$1").replace(/&quot;/g,"'");return o},exportChart:function(e,t){e=e||{};var n=this,o=n.options.exporting,i=n.getSVG(f({chart:{borderRadius:0}},o.chartOptions,t,{exporting:{sourceWidth:e.sourceWidth||o.sourceWidth,sourceHeight:e.sourceHeight||o.sourceHeight}}));e=f(n.options.exporting,e);g.post(e.url,{filename:e.filename||"chart",type:e.type,width:e.width||0,scale:e.scale||2,svg:i})},print:function(){var e=this,t=e.container,n=[],o=t.parentNode,i=h.body,r=i.childNodes;if(e.isPrinting){return}e.isPrinting=true;k(r,function(e,t){if(e.nodeType===1){n[t]=e.style.display;e.style.display=G}});i.appendChild(t);a.focus();a.print();setTimeout(function(){o.appendChild(t);k(r,function(e,t){if(e.nodeType===1){e.style.display=n[t]}});e.isPrinting=false},1e3)},contextMenu:function(t,e,n,o,i,r,a){var s=this,l=s.options.navigation,p=l.menuItemStyle,c=s.chartWidth,u=s.chartHeight,h="cache-"+t,d=s[h],m=C(i,r),g="3px 3px 10px #888",f,x,y,b;if(!d){s[h]=d=w(F,{className:t},{position:M,zIndex:1e3,padding:m+D},s.container);f=w(F,null,E({MozBoxShadow:g,WebkitBoxShadow:g,boxShadow:g},l.menuStyle),d);x=function(){S(d,{display:G});if(a){a.setState(0)}s.openMenu=false};v(d,"mouseleave",function(){y=setTimeout(x,500)});v(d,"mouseenter",function(){clearTimeout(y)});v(document,"mousedown",function(e){if(!s.pointer.inClass(e.target,t)){x()}});k(e,function(e){if(e){var t=e.separator?w("hr",null,null,f):w(F,{onmouseover:function(){S(this,l.menuItemHoverStyle)},onmouseout:function(){S(this,p)},onclick:function(){x();e.onclick.apply(s,arguments)},innerHTML:e.text||s.options.lang[e.textKey]},E({cursor:"pointer"},p),f);s.exportDivElements.push(t)}});s.exportDivElements.push(f,d);s.exportMenuWidth=d.offsetWidth;s.exportMenuHeight=d.offsetHeight}b={display:"block"};if(n+s.exportMenuWidth>c){b.right=c-n-i-m+D}else{b.left=n-m+D}if(o+r+s.exportMenuHeight>u&&a.alignOptions.verticalAlign!=="top"){b.bottom=u-o-m+D}else{b.top=o+r-m+D}S(d,b);s.openMenu=true},addButton:function(e){var t=this,n=t.renderer,o=f(t.options.navigation.buttonOptions,e),i=o.onclick,r=o.menuItems,a,s,l={stroke:o.symbolStroke,fill:o.symbolFill},p=o.symbolSize||12;if(!t.btnCount){t.btnCount=0}if(!t.exportDivElements){t.exportDivElements=[];t.exportSVGElements=[]}if(o.enabled===false){return}var c=o.theme,u=c.states,h=u&&u.hover,d=u&&u.select,m;delete c.states;if(i){m=function(){i.apply(t,arguments)}}else if(r){m=function(){t.contextMenu(s.menuClassName,r,s.translateX,s.translateY,s.width,s.height,s);s.setState(2)}}if(o.text&&o.symbol){c.paddingLeft=g.pick(c.paddingLeft,25)}else if(!o.text){E(c,{width:o.width,height:o.height,padding:0})}s=n.button(o.text,0,0,m,c,h,d).attr({title:t.options.lang[o._titleKey],"stroke-linecap":"round"});s.menuClassName=e.menuClassName||x+"menu-"+t.btnCount++;if(o.symbol){a=n.symbol(o.symbol,o.symbolX-p/2,o.symbolY-p/2,p,p).attr(E(l,{"stroke-width":o.symbolStrokeWidth||1,zIndex:1})).add(s)}s.add().align(E(o,{width:s.width,x:g.pick(o.x,y)}),true,"spacingBox");y+=(s.width+o.buttonSpacing)*(o.align==="right"?-1:1);t.exportSVGElements.push(s,a)},destroyExport:function(e){var t=e.target,n,o;for(n=0;n<t.exportSVGElements.length;n++){o=t.exportSVGElements[n];if(o){o.onclick=o.ontouchstart=null;t.exportSVGElements[n]=o.destroy()}}for(n=0;n<t.exportDivElements.length;n++){o=t.exportDivElements[n];i(o,"mouseleave");t.exportDivElements[n]=o.onmouseout=o.onmouseover=o.ontouchstart=o.onclick=null;u(o)}}});o.menu=function(e,t,n,o){var i=[r,e,t+2.5,s,e+n,t+2.5,r,e,t+o/2+.5,s,e+n,t+o/2+.5,r,e,t+o-1.5,s,e+n,t+o-1.5];return i};e.prototype.callbacks.push(function(e){var t,n=e.options.exporting,o=n.buttons;y=0;if(n.enabled!==false){for(t in o){e.addButton(o[t])}v(e,"destroy",e.destroyExport)}})})(Highcharts);