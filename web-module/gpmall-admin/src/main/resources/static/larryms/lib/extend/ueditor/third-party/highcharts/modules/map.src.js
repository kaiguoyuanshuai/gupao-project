(function(f){var x,t=f.Axis,e=f.Chart,l=f.Point,i=f.Pointer,g=f.each,s=f.extend,h=f.merge,y=f.pick,b=f.numberFormat,a=f.getOptions(),M=f.seriesTypes,o=a.plotOptions,n=f.wrap,u=f.Color,r=function(){};function w(t,e,i){var a=4,o=[];while(a--){o[a]=Math.round(e.rgba[a]+(t.rgba[a]-e.rgba[a])*(1-i))}return"rgba("+o.join(",")+")"}a.mapNavigation={buttonOptions:{align:"right",verticalAlign:"bottom",x:0,width:18,height:18,style:{fontSize:"15px",fontWeight:"bold",textAlign:"center"}},buttons:{zoomIn:{onclick:function(){this.mapZoom(.5)},text:"+",y:-32},zoomOut:{onclick:function(){this.mapZoom(2)},text:"-",y:0}}};f.splitPath=function(t){var e;t=t.replace(/([A-Za-z])/g," $1 ");t=t.replace(/^\s*/,"").replace(/\s*$/,"");t=t.split(/[ ,]+/);for(e=0;e<t.length;e++){if(!/[a-zA-Z]/.test(t[e])){t[e]=parseFloat(t[e])}}return t};f.maps={};n(t.prototype,"getSeriesExtremes",function(t){var i=this.isXAxis,a,o,n=[];g(this.series,function(t,e){if(t.useMapGeometry){n[e]=t.xData;t.xData=[]}});t.call(this);a=y(this.dataMin,Number.MAX_VALUE);o=y(this.dataMax,Number.MIN_VALUE);g(this.series,function(t,e){if(t.useMapGeometry){a=Math.min(a,t[i?"minX":"minY"]);o=Math.max(o,t[i?"maxX":"maxY"]);t.xData=n[e]}});this.dataMin=a;this.dataMax=o});n(t.prototype,"setAxisTranslation",function(t){var e=this.chart,i,a=e.plotWidth/e.plotHeight,o=this.isXAxis,n,r=e.xAxis[0],l;t.call(this);if(e.options.chart.type==="map"&&!o&&r.transA!==x){this.transA=r.transA=Math.min(this.transA,r.transA);i=(r.max-r.min)/(this.max-this.min);l=i>a?this:r;n=(l.max-l.min)*l.transA;l.minPixelPadding=(l.len-n)/2}});n(e.prototype,"render",function(t){var e=this,i=e.options.mapNavigation;t.call(e);e.renderMapNavigation();if(i.zoomOnDoubleClick){f.addEvent(e.container,"dblclick",function(t){e.pointer.onContainerDblClick(t)})}if(i.zoomOnMouseWheel){f.addEvent(e.container,document.onmousewheel===undefined?"DOMMouseScroll":"mousewheel",function(t){e.pointer.onContainerMouseWheel(t)})}});s(i.prototype,{onContainerDblClick:function(t){var e=this.chart;t=this.normalize(t);if(e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop)){e.mapZoom(.5,e.xAxis[0].toValue(t.chartX),e.yAxis[0].toValue(t.chartY))}},onContainerMouseWheel:function(t){var e=this.chart,i;t=this.normalize(t);i=t.detail||-(t.wheelDelta/120);if(e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop)){e.mapZoom(i>0?2:.5,e.xAxis[0].toValue(t.chartX),e.yAxis[0].toValue(t.chartY))}}});n(i.prototype,"init",function(t,e,i){t.call(this,e,i);if(i.mapNavigation.enableTouchZoom){this.pinchX=this.pinchHor=this.pinchY=this.pinchVert=true}});s(e.prototype,{renderMapNavigation:function(){var t=this,e=this.options.mapNavigation,i=e.buttons,a,o,n,r=function(){this.handler.call(t)};if(e.enableButtons){for(a in i){if(i.hasOwnProperty(a)){n=h(e.buttonOptions,i[a]);o=t.renderer.button(n.text,0,0,r).attr({width:n.width,height:n.height}).css(n.style).add();o.handler=n.onclick;o.align(s(n,{width:o.width,height:o.height}),null,"spacingBox")}}}},fitToBox:function(a,o){g([["x","width"],["y","height"]],function(t){var e=t[0],i=t[1];if(a[e]+a[i]>o[e]+o[i]){if(a[i]>o[i]){a[i]=o[i];a[e]=o[e]}else{a[e]=o[e]+o[i]-a[i]}}if(a[i]>o[i]){a[i]=o[i]}if(a[e]<o[e]){a[e]=o[e]}});return a},mapZoom:function(t,e,i){if(this.isMapZooming){return}var a=this,o=a.xAxis[0],n=o.max-o.min,r=y(e,o.min+n/2),l=n*t,s=a.yAxis[0],h=s.max-s.min,p=y(i,s.min+h/2),m=h*t,d=r-l/2,c=p-m/2,u=y(a.options.chart.animation,true),f,x=a.fitToBox({x:d,y:c,width:l,height:m},{x:o.dataMin,y:s.dataMin,width:o.dataMax-o.dataMin,height:s.dataMax-s.dataMin});o.setExtremes(x.x,x.x+x.width,false);s.setExtremes(x.y,x.y+x.height,false);f=u?u.duration||500:0;if(f){a.isMapZooming=true;setTimeout(function(){a.isMapZooming=false},f)}a.redraw()}});o.map=h(o.scatter,{animation:false,nullColor:"#F8F8F8",borderColor:"silver",borderWidth:1,marker:null,stickyTracking:false,dataLabels:{verticalAlign:"middle"},turboThreshold:0,tooltip:{followPointer:true,pointFormat:"{point.name}: {point.y}<br/>"},states:{normal:{animation:true}}});var p=f.extendClass(l,{applyOptions:function(t,e){var i=l.prototype.applyOptions.call(this,t,e);if(i.path&&typeof i.path==="string"){i.path=i.options.path=f.splitPath(i.path)}return i},onMouseOver:function(){clearTimeout(this.colorInterval);l.prototype.onMouseOver.call(this)},onMouseOut:function(){var i=this,a=+new Date,o=u(i.options.color),n=u(i.pointAttr.hover.fill),t=i.series.options.states.normal.animation,r=t&&(t.duration||500);if(r&&o.rgba.length===4&&n.rgba.length===4){delete i.pointAttr[""].fill;clearTimeout(i.colorInterval);i.colorInterval=setInterval(function(){var t=(new Date-a)/r,e=i.graphic;if(t>1){t=1}if(e){e.attr("fill",w(n,o,t))}if(t>=1){clearTimeout(i.colorInterval)}},13)}l.prototype.onMouseOut.call(i)}});M.map=f.extendClass(M.scatter,{type:"map",pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color"},colorKey:"y",pointClass:p,trackerGroups:["group","markerGroup","dataLabelsGroup"],getSymbol:r,supportsDrilldown:true,getExtremesFromAll:true,useMapGeometry:true,init:function(t){var e=this,i=t.options.legend.valueDecimals,a=[],o,n,r,l,s,h,p,m,d,c,u=t.options.legend.layout==="horizontal";f.Series.prototype.init.apply(this,arguments);h=e.options.colorRange;p=e.options.valueRanges;if(p){g(p,function(t){n=t.from;r=t.to;o="";if(n===x){o="< "}else if(r===x){o="> "}if(n!==x){o+=b(n,i)}if(n!==x&&r!==x){o+=" - "}if(r!==x){o+=b(r,i)}a.push(f.extend({chart:e.chart,name:o,options:{},drawLegendSymbol:M.area.prototype.drawLegendSymbol,visible:true,setState:function(){},setVisible:function(){}},t))});e.legendItems=a}else if(h){n=h.from;r=h.to;l=h.fromLabel;s=h.toLabel;d=u?[0,0,1,0]:[0,1,0,0];if(!u){c=l;l=s;s=c}m={linearGradient:{x1:d[0],y1:d[1],x2:d[2],y2:d[3]},stops:[[0,n],[1,r]]};a=[{chart:e.chart,options:{},fromLabel:l,toLabel:s,color:m,drawLegendSymbol:this.drawLegendSymbolGradient,visible:true,setState:function(){},setVisible:function(){}}];e.legendItems=a}},drawLegendSymbol:M.area.prototype.drawLegendSymbol,drawLegendSymbolGradient:function(t,e){var i=t.options.symbolPadding,a=y(t.options.padding,8),o,n,r=this.chart.renderer.fontMetrics(t.options.itemStyle.fontSize).h,l=t.options.layout==="horizontal",s,h,p,m=y(t.options.rectangleLength,200);if(l){o=-(i/2);n=0}else{o=-m+t.baseline-i/2;n=a+r}e.fromText=this.chart.renderer.text(e.fromLabel,n,o).attr({zIndex:2}).add(e.legendGroup);s=e.fromText.getBBox();e.legendSymbol=this.chart.renderer.rect(l?s.x+s.width+i:s.x-r-i,s.y,l?m:r,l?r:m,2).attr({zIndex:1}).add(e.legendGroup);h=e.legendSymbol.getBBox();e.toText=this.chart.renderer.text(e.toLabel,h.x+h.width+i,l?o:h.y+h.height-i).attr({zIndex:2}).add(e.legendGroup);p=e.toText.getBBox();if(l){t.offsetWidth=s.width+h.width+p.width+i*2+a;t.itemY=r+a}else{t.offsetWidth=Math.max(s.width,p.width)+i+h.width+a;t.itemY=h.height+a;t.itemX=i}},getBox:function(t){var s=Number.MIN_VALUE,h=Number.MAX_VALUE,p=Number.MIN_VALUE,m=Number.MAX_VALUE;g(t||this.options.data,function(t){var e=t.path,i=e.length,a=false,o=Number.MIN_VALUE,n=Number.MAX_VALUE,r=Number.MIN_VALUE,l=Number.MAX_VALUE;while(i--){if(typeof e[i]==="number"&&!isNaN(e[i])){if(a){o=Math.max(o,e[i]);n=Math.min(n,e[i])}else{r=Math.max(r,e[i]);l=Math.min(l,e[i])}a=!a}}t._maxX=o;t._minX=n;t._maxY=r;t._minY=l;s=Math.max(s,o);h=Math.min(h,n);p=Math.max(p,r);m=Math.min(m,l)});this.minY=m;this.maxY=p;this.minX=h;this.maxX=s},translatePath:function(t){var e=this,i=false,a=e.xAxis,o=e.yAxis,n;t=[].concat(t);n=t.length;while(n--){if(typeof t[n]==="number"){if(i){t[n]=Math.round(a.translate(t[n]))}else{t[n]=Math.round(o.len-o.translate(t[n]))}i=!i}}return t},setData:function(){f.Series.prototype.setData.apply(this,arguments);this.getBox()},translate:function(){var e=this,i=Number.MAX_VALUE,a=Number.MIN_VALUE;e.generatePoints();g(e.data,function(t){t.shapeType="path";t.shapeArgs={d:e.translatePath(t.path)};if(typeof t.y==="number"){if(t.y>a){a=t.y}else if(t.y<i){i=t.y}}});e.translateColors(i,a)},translateColors:function(r,l){var s=this.options,h=s.valueRanges,p=s.colorRange,m=this.colorKey,d,c;if(p){d=u(p.from);c=u(p.to)}g(this.data,function(t){var e=t[m],i,a,o,n;if(h){o=h.length;while(o--){i=h[o];d=i.from;c=i.to;if((d===x||e>=d)&&(c===x||e<=c)){a=i.color;break}}}else if(p&&e!==undefined){n=1-(l-e)/(l-r);a=e===null?s.nullColor:w(d,c,n)}if(a){t.color=null;t.options.color=a}})},drawGraph:r,drawDataLabels:r,drawPoints:function(){var t=this,r=t.xAxis,l=t.yAxis,s=t.colorKey;g(t.data,function(t){t.plotY=1;if(t[s]===null){t[s]=0;t.isNull=true}});M.column.prototype.drawPoints.apply(t);g(t.data,function(t){var e=t.dataLabels,i=r.toPixels(t._minX,true),a=r.toPixels(t._maxX,true),o=l.toPixels(t._minY,true),n=l.toPixels(t._maxY,true);t.plotX=Math.round(i+(a-i)*y(e&&e.anchorX,.5));t.plotY=Math.round(o+(n-o)*y(e&&e.anchorY,.5));if(t.isNull){t[s]=null}});f.Series.prototype.drawDataLabels.call(t)},animateDrilldown:function(t){var e=this.chart.plotBox,i=this.chart.drilldownLevels[this.chart.drilldownLevels.length-1],a=i.bBox,o=this.chart.options.drilldown.animation,n;if(!t){n=Math.min(a.width/e.width,a.height/e.height);i.shapeArgs={scaleX:n,scaleY:n,translateX:a.x,translateY:a.y};g(this.points,function(t){t.graphic.attr(i.shapeArgs).animate({scaleX:1,scaleY:1,translateX:0,translateY:0},o)});delete this.animate}},animateDrillupFrom:function(t){M.column.prototype.animateDrillupFrom.call(this,t)},animateDrillupTo:function(t){M.column.prototype.animateDrillupTo.call(this,t)}});o.mapline=h(o.map,{lineWidth:1,backgroundColor:"none"});M.mapline=f.extendClass(M.map,{type:"mapline",pointAttrToOptions:{stroke:"color","stroke-width":"lineWidth",fill:"backgroundColor"},drawLegendSymbol:M.line.prototype.drawLegendSymbol});o.mappoint=h(o.scatter,{dataLabels:{enabled:true,format:"{point.name}",color:"black",style:{textShadow:"0 0 5px white"}}});M.mappoint=f.extendClass(M.scatter,{type:"mappoint"});f.Map=function(t,e){var i={endOnTick:false,gridLineWidth:0,labels:{enabled:false},lineWidth:0,minPadding:0,maxPadding:0,startOnTick:false,tickWidth:0,title:null},a;a=t.series;t.series=null;t=h({chart:{type:"map",panning:"xy"},xAxis:i,yAxis:h(i,{reversed:true})},t,{chart:{inverted:false}});t.series=a;return new f.Chart(t,e)}})(Highcharts);